#!/usr/bin/env php
<?php
require_once dirname(__FILE__) . '/../src/GitMigrate.php';

use PhillipsData\GitMigrate\GitMigrate;

$opts = getopt(
    null,
    array(
        'items:',
        'dir:',
        'authors:',
        'url:',
        'javalib:',
        'sync::'
    )
);

$items = require $opts['items'];

$migrate = new GitMigrate(
    $opts['dir'],
    $opts['authors'],
    $opts['url'],
    $opts['javalib']
);
foreach ($items as $path => $item) {
    if (is_int($path)) {
        $path = null;
    }
    $migrate->process(
        $item,
        $path,
        !empty($opts['sync'])
        ? 'sync'
        : 'clone'
    );
}
